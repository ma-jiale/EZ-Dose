
{% extends "base.html" %}
{% block title %}每日服药记录{% endblock %}

{% block content %}
    <h1>每日服药记录</h1>

    <!-- 1. 日期选择表单 -->
    <form method="GET" class="form-inline mb-3">
        <label for="date-picker">选择日期:</label>
        <input type="date" id="date-picker" name="date" value="{{ selected_date }}">
        <button type="submit" class="btn btn-primary">查询</button>
    </form>

    <!-- 2. 数据表格 -->
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>患者ID</th>
                <th>患者姓名</th>
                <th>时间段</th>
                <th>服药状态</th>
                <th>完成时间</th>
                <th>备注</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr class="{{ 'table-success' if task.status == '已服药' else '' }}">
                <td>{{ task.patientId }}</td>
                <td>{{ task.patientName }}</td>
                <td>{{ task.timeSlot_displayName }}</td>
                <td>
                    <span class="status-badge status-{{ task.status | lower }}">
                        {{ task.status }}
                    </span>
                </td>
                <td>{{ task.completionTime }}</td>
                <td>{{ task.remark }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" class="text-center">没有找到该日期的任务记录。</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}