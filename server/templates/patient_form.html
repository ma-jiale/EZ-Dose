{% extends "base.html" %}

{% block title %}{% if patient %}编辑患者{% else %}新增患者{% endif %}{% endblock %}

{% block content %}
    <h1>{% if patient %}编辑患者{% else %}新增患者{% endif %}</h1>
    
    <form method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="patientName">患者姓名：</label>
            <input type="text" id="patientName" name="patientName" 
                   value="{% if patient %}{{ patient.patientName }}{% endif %}" required>
        </div>
        
        <div class="form-group">
            <label for="auntieId">负责护工：</label>
            <select id="auntieId" name="auntieId" required>
                <option value="">请选择护工</option>
                {% for auntie in aunties %}
                <option value="{{ auntie.auntieId }}" 
                        {% if patient and patient.auntieId == auntie.auntieId %}selected{% endif %}>
                    {{ auntie.name }}
                </option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="patientBedNumber">床号：</label>
            <input type="text" id="patientBedNumber" name="patientBedNumber" 
                   value="{% if patient %}{{ patient.patientBedNumber }}{% endif %}" required>
        </div>
        
        <div class="form-group">
            <label for="patientImage">患者照片：</label>
            <input type="file" id="patientImage" name="patientImage" accept="image/*">
            {% if patient and patient.imageResourceId %}
                <p>当前图片：{{ patient.imageResourceId }}</p>
            {% endif %}
        </div>
        
        <div class="actions">
            <button type="submit" class="btn btn-primary">保存</button>
            <a href="{{ URL_PREFIX }}{{ url_for('manage_patients') }}" class="btn btn-secondary">取消</a>
        </div>
    </form>
{% endblock %}